[//]: # ( )
[//]: # (This file is automatically generated by a `metapak`)
[//]: # (module. Do not change it  except between the)
[//]: # (`content:start/end` flags, your changes would)
[//]: # (be overridden.)
[//]: # ( )
# openapi-ts-sdk-builder
> Create a TypeScript SDK from an OpenAPI 3 definition

[![GitHub license](https://img.shields.io/badge/license-MIT-blue.svg)](https://github.com/nfroidure/openapi-ts-sdk-builder/blob/master/LICENSE)
[![Build status](https://travis-ci.com/nfroidure/openapi-ts-sdk-builder.svg?branch=master)](https://travis-ci.com/github/nfroidure/openapi-ts-sdk-builder)
[![Coverage Status](https://coveralls.io/repos/github/nfroidure/openapi-ts-sdk-builder/badge.svg?branch=master)](https://coveralls.io/github/nfroidure/openapi-ts-sdk-builder?branch=master)
[![NPM version](https://badge.fury.io/js/openapi-ts-sdk-builder.svg)](https://npmjs.org/package/openapi-ts-sdk-builder)
[![Dependency Status](https://david-dm.org/nfroidure/openapi-ts-sdk-builder.svg)](https://david-dm.org/nfroidure/openapi-ts-sdk-builder)
[![devDependency Status](https://david-dm.org/nfroidure/openapi-ts-sdk-builder/dev-status.svg)](https://david-dm.org/nfroidure/openapi-ts-sdk-builder#info=devDependencies)
[![Package Quality](https://npm.packagequality.com/shield/openapi-ts-sdk-builder.svg)](https://packagequality.com/#?package=openapi-ts-sdk-builder)


[//]: # (::contents:start)


A TypeScript rewrite of [openapi-js-sdk-builder](https://github.com/sencrop/openapi-js-sdk-builder).

It basically brings a minimal TypeScript SDK from an OpenAPI3 file
 with no OOP inside. It is based on the `axios` module.

# Usage

With a raw Node script:
```js
import { generateSDKFromOpenAPI } from 'openapi-ts-sdk-builder';
import { readFileSync, writeFileSync } from 'fs';

const openAPIContents = readFileSync('openapi.json', 'utf-8');
const sdkContents = generateSDKFromOpenAPI(openAPIContents);

writeFileSync('sdk.ts', sdkContents, 'utf-8');

```

You can also use the built-in [webpack loader](https://webpack.js.org/contribute/writing-a-loader/) in your frontends builds:

In `webpack.config.js`:
```js
module.exports = {
  //...
  module: {
    rules: [
      {
        test: /(\.|^)openapi.json$/,
        loader: require.resolve('openapi-js-sdk-builder'),
        type: 'javascript/auto'
      }
    ]
  }
};
```

In your code:
```js
import API from './myapi.openapi.json'

// Just use the API then
await API.getPing();

```

You can also safely operate on the API by doing so:
```ts
import BaseAPI from './sdk';
import config from './config';
import type { AxiosRequestConfig } from 'axios';

type AuthTokenInput = { token?: string };

export default Object.keys(BaseAPI).reduce((FinalAPI, operationId) => {
  FinalAPI[operationId] = async (
    { token, ...input }: unknown & AuthTokenInput,
    options: AxiosRequestConfig = {},
  ) => {
    return BaseAPI[operationId](
      {
        ...input,
        xApplicationVersion: process.env.VERSION,
      },
      {
        ...options,
        baseURL: config.apiURL,
        headers: {
          ...options.headers,
          ...(token
            ? {
                authorization: `Bearer ${token}`,
              }
            : {}),
        },
        validateStatus: () => true,
      },
    );
  };
  return FinalAPI;
}, {}) as {
  [P in keyof typeof BaseAPI]: (
    input: Parameters<typeof BaseAPI[P]>[0] & AuthTokenInput,
    config?: AxiosRequestConfig,
  ) => Promise<ReturnType<typeof BaseAPI[P]>>;
};
```


[//]: # (::contents:end)

# API
<a name="module_openapi-js-sdk-builder"></a>

## openapi-js-sdk-builder
<a name="module_openapi-js-sdk-builder..generateSDKFromOpenAPI"></a>

### openapi-js-sdk-builder~generateSDKFromOpenAPI(openAPIContent, sdkVersion) â‡’ <code>Promise.&lt;string&gt;</code>
Build a JS SDK from an OpenAPI file

**Kind**: inner method of [<code>openapi-js-sdk-builder</code>](#module_openapi-js-sdk-builder)  
**Returns**: <code>Promise.&lt;string&gt;</code> - The SDK JS code  

| Param | Type |
| --- | --- |
| openAPIContent | <code>String</code> | 
| sdkVersion | <code>String</code> | 


# Authors
- [Nicolas Froidure](https://insertafter.com/en/index.html)

# License
[MIT](https://github.com/nfroidure/openapi-ts-sdk-builder/blob/master/LICENSE)
